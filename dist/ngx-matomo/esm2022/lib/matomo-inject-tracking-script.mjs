export function injectMatomoTrackingScriptFactory(document, debugTracing = false) {
    return (configuration) => {
        if (!configuration.scriptUrl || !configuration.trackers?.length)
            return;
        try {
            if (debugTracing)
                console.debug('\x1B[1mngx-Matomo\x1B[m â€¢ ðŸ’‰ Inject Matomo.js script in DOM for', configuration);
            const [mainTracker, ...otherTrackers] = configuration.trackers;
            window['_paq'].push(['setTrackerUrl', mainTracker.trackerUrl]);
            window['_paq'].push(['setSiteId', mainTracker.siteId.toString()]);
            otherTrackers.forEach((tracker) => window['_paq'].push(['addTracker', tracker.trackerUrl, tracker.siteId.toString()]));
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.async = true;
            script.defer = true;
            script.src = configuration.scriptUrl;
            const firstScript = document.getElementsByTagName('script')[0];
            firstScript.parentNode?.insertBefore(script, firstScript);
        }
        catch (e) {
            if (!(e instanceof ReferenceError))
                throw e;
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0b21vLWluamVjdC10cmFja2luZy1zY3JpcHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtbWF0b21vL3NyYy9saWIvbWF0b21vLWluamVjdC10cmFja2luZy1zY3JpcHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsTUFBTSxVQUFVLGlDQUFpQyxDQUFDLFFBQWtCLEVBQUUsWUFBWSxHQUFHLEtBQUs7SUFDeEYsT0FBTyxDQUFDLGFBQTZCLEVBQUUsRUFBRTtRQUN2QyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEVBQUUsTUFBTTtZQUFFLE9BQU87UUFDeEUsSUFBSSxDQUFDO1lBQ0gsSUFBSSxZQUFZO2dCQUNkLE9BQU8sQ0FBQyxLQUFLLENBQ1gsaUVBQWlFLEVBQ2pFLGFBQWEsQ0FDZCxDQUFDO1lBQ0osTUFBTSxDQUFDLFdBQVcsRUFBRSxHQUFHLGFBQWEsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUM7WUFDL0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRSxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2xFLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUNoQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQ25GLENBQUM7WUFDRixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUM7WUFDaEMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDcEIsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDcEIsTUFBTSxDQUFDLEdBQUcsR0FBRyxhQUFhLENBQUMsU0FBVSxDQUFDO1lBQ3RDLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvRCxXQUFXLENBQUMsVUFBVSxFQUFFLFlBQVksQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDNUQsQ0FBQztRQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDWCxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQVksY0FBYyxDQUFDO2dCQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzlDLENBQUM7SUFDSCxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0b21vVHJhY2tlcnMgfSBmcm9tICcuL21hdG9tby1jb25maWd1cmF0aW9uJztcblxuZXhwb3J0IGZ1bmN0aW9uIGluamVjdE1hdG9tb1RyYWNraW5nU2NyaXB0RmFjdG9yeShkb2N1bWVudDogRG9jdW1lbnQsIGRlYnVnVHJhY2luZyA9IGZhbHNlKSB7XG4gIHJldHVybiAoY29uZmlndXJhdGlvbjogTWF0b21vVHJhY2tlcnMpID0+IHtcbiAgICBpZiAoIWNvbmZpZ3VyYXRpb24uc2NyaXB0VXJsIHx8ICFjb25maWd1cmF0aW9uLnRyYWNrZXJzPy5sZW5ndGgpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgaWYgKGRlYnVnVHJhY2luZylcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgICAnXFx4MUJbMW1uZ3gtTWF0b21vXFx4MUJbbSDigKIg8J+SiSBJbmplY3QgTWF0b21vLmpzIHNjcmlwdCBpbiBET00gZm9yJyxcbiAgICAgICAgICBjb25maWd1cmF0aW9uLFxuICAgICAgICApO1xuICAgICAgY29uc3QgW21haW5UcmFja2VyLCAuLi5vdGhlclRyYWNrZXJzXSA9IGNvbmZpZ3VyYXRpb24udHJhY2tlcnM7XG4gICAgICB3aW5kb3dbJ19wYXEnXS5wdXNoKFsnc2V0VHJhY2tlclVybCcsIG1haW5UcmFja2VyLnRyYWNrZXJVcmxdKTtcbiAgICAgIHdpbmRvd1snX3BhcSddLnB1c2goWydzZXRTaXRlSWQnLCBtYWluVHJhY2tlci5zaXRlSWQudG9TdHJpbmcoKV0pO1xuICAgICAgb3RoZXJUcmFja2Vycy5mb3JFYWNoKCh0cmFja2VyKSA9PlxuICAgICAgICB3aW5kb3dbJ19wYXEnXS5wdXNoKFsnYWRkVHJhY2tlcicsIHRyYWNrZXIudHJhY2tlclVybCwgdHJhY2tlci5zaXRlSWQudG9TdHJpbmcoKV0pLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgICBzY3JpcHQuZGVmZXIgPSB0cnVlO1xuICAgICAgc2NyaXB0LnNyYyA9IGNvbmZpZ3VyYXRpb24uc2NyaXB0VXJsITtcbiAgICAgIGNvbnN0IGZpcnN0U2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgICAgZmlyc3RTY3JpcHQucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RTY3JpcHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvcikpIHRocm93IGU7XG4gICAgfVxuICB9O1xufVxuIl19